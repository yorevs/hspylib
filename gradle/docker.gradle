/* Docker Tasks ------------------------------------------------------------- */

/* Start all containers as daemons */
task startContainers(type: Task) {
  group = 'Docker'
  description = 'Start all containers as daemons'
  doLast {
    containers.each { String container ->
      println "Starting container: ${container}"
      exec {
        workingDir = "${rootDir}/docker/${container}"
        commandLine 'docker-compose', 'up', '-d'
      }
    }
  }
}

/* Stop and  remove all containers */
task stopContainers(type: Task) {
  group = 'Docker'
  description = 'Stop and  remove all containers'
  doLast {
    containers.each { String container ->
      println "Stopping container: ${container}"
      exec {
        workingDir = "${rootDir}/docker/${container}"
        commandLine 'docker-compose', 'down'
      }
    }
  }
}
